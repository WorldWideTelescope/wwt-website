<HTML>

<head>
<title>WorldWide Telescope Projection Reference</title>

 <link rel=stylesheet href="SDK_style.css" type="text/css" media=screen>

</head>

<body>

<h1><a name="WorldWideTelescopeProjectionReference">WorldWide Telescope Projection Reference</a></h1>
<p><font color="red">Note: This documentation is preliminary and subject to change.</font></p>
<img alt="" height="27" src="//wwtweb.blob.core.windows.net/docs/uiimages/YesYes.bmp" width="220">

<p>WorldWide Telescope is a viewer for spheres. As a viewer zooms in the spheres are of ever increasing size and 
resolution. Sometimes, for panoramas and all-sky surveys – WorldWide Telescope renders the inside of a sphere. Other times, for the surfaces of 
planets and moons, it renders the outside of a sphere. WorldWide Telescope does <i>not </i> model the irregular shape of the Earth
usually referred to as an oblate spheroid. The east-west diameter of the earth is 7,926 miles (or 12,756 kilometers), whereas
the north-south diameter is slightly shorter at 7,901 miles (or 12,715 kilometers). The program treats the Earth, and other planets
and moons, as perfect spheres.</p>
<p>The classic problem with mapping is obtaining a useful 2D flat image of a 
round 3D surface. There are several well known projection systems, the most 
popular are briefly discussed here, though all distort areas of the surface to a 
degree. Distortions which are acceptable to a mapping system designed to show 
the populated areas of the Earth, are much less acceptable if the
object is to display the topography. In WorldWide Telescope the projection of flat images onto a sphere is done using a
method called TOAST projection -- a projection system that does not prioritize one area of a sphere over another.</p>

<p>This document provides background information on the theory and practice of 
TOAST projection. Equirectangular, Mercator and Gnomonic maps can be converted 
to the TOAST format, and are discussed as <em>source</em> projections.</p>

<h2>Table of Contents</h2>
<ul>
<li><a href="#SourceProjections">Source Projections</a></li>
<ul>
<li><a href="#EquirectangularProjection">Equirectangular Projection</a></li>
<li><a href="#MercatorProjection">Mercator Projection</a></li>
<li><a href="#GnomonicProjection">Gnomonic Projection</a></li>
</ul>

<li><a href="#TOASTProjection">TOAST Projection</a></li>
<ul>
<li><a href="#ApproximatingaSphere">Approximating a Sphere</a></li>
<li><a href="#TOASTMapofEarth">TOAST Map of Earth</a></li>
<li><a href="InsideandOutsideProjections">Inside and Outside Projections</a></li>
<li><a href="#ImagePyramids">Image Pyramids</a></li>
</ul>
</ul>

<h4>See Also</h4>
<ul type="disc">
<li><a href="//worldwidetelescope.org/authoring/Authoring.aspx">WorldWide Telescope Authoring</a></li>
<li><a href="WorldWideTelescopeDataFilesReference.html">WorldWide Telescope Data Files Reference</a></li>
<li><a href="WorldWideTelescopeDataToolsGuide.html">WorldWide Telescope Data Tools Guide</a></li>
<li><a href="WorldWideTelescopeWebControlScriptReference.html">WorldWide Telescope Web Control Script Reference</a></li>
</ul>



<hr>
<h2><a name="SourceProjections">Source Projections</a></h2>
<p>The following projections can be used as the source for a conversion to the TOAST format:</p>
<ul>
<li><a href="#EquirectangularProjection">Equirectangular Projection</a></li>
<li><a href="#MercatorProjection">Mercator Projection</a></li>
<li><a href="#GnomonicProjection">Gnomonic Projection</a></li>
</ul>
<h4>See Also</h4>
<ul type="disc">
<li><a href="#TOASTProjection">TOAST Projection</a></li>
<li><a href="#WorldWideTelescopeProjectionReference">WorldWide Telescope Projection Reference</a></li>
</ul>

<hr>
<h3><a name="EquirectangularProjection">Equirectangular Projection</a></h3>
<p>With Equirectangular coordinates, every pixel represents the same number of 
degrees of latitude and longitude for planets, and degrees for Right Ascension 
(RA) and Declination (Dec) for sky surveys. Equirectangular projection is by far 
the most common system used to represent earth maps, such as the NASA Blue 
Marble map shown below. The utility of this projection is greatly assisted by 
the simple fact that very few people live near the poles, where the projection 
becomes problematic, in particular all the points along the top of an 
equirectangular projection represent only one point in 3D space, namely the 
North Pole. And of course there is a similar singularity for the lower edge of 
the map and the South Pole.</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td>
	<img alt="Map of Earth" height="512" src="//wwtweb.blob.core.windows.net/docs/images/MapOfEarth.jpg" width="1024"></td></tr>
	<tr><td>This composite image of Earth was taken in January 2004. Credit: NASA, Visible Earth.</td></tr>
</table>
<p>The wider problem with equirectangular projections is that the relative sizes 
of objects (land masses in the map above) are substantially incorrect. An 
equirectangular image that covers the entire sphere will have a 2 x 1 aspect 
ratio, so it is two times as wide as it is high (a full circumference east-west, 
half a circumference north-south). </p>

<h4>See Also</h4>
<ul type="disc">
<li><a href="#SourceProjections">Source Projections</a></li>
</ul>

<hr>
<h3><a name="MercatorProjection">Mercator Projection</a></h3>
<p>Unlike equirectangular projection, Mercator projection preserves
angles, so is useful in marine navigation, but at the expense of distorting the relative sizes of land masses. The distortion of
sizes is even greater than in equirectangular projection, with Greenland  appearing about the same size as Africa in Mercator
projection, about half the size in equirectangular projection, and about one fourteenth the size on a globe.</p>
<p>Mercator projection is a specific example of cylindrical projection -- where 
horizontal lines are preserved in the mapping.</p>

<h4>See Also</h4>
<ul type="disc">
<li><a href="#SourceProjections">Source Projections</a></li>
</ul>

<hr>
<h3><a name="GnomonicProjection">Gnomonic Projection</a></h3>
<p>A flat map is achieved by projecting from the center of the sphere, 
perpendicularly through the surface of the sphere, to a tangent plane. Unlike 
the previous two projection systems gnomonic only enables less than half of the 
sphere to be projected onto one map. Also known as tangential projection, 
gnomonic projection displays all great circles as straight lines, so for 
example, the meridians and equator appear as straight lines on the map. </p>
<h4>See Also</h4>
<ul type="disc">
<li><a href="#SourceProjections">Source Projections</a></li>
<li><a href="#WorldWideTelescopeProjectionReference">WorldWide Telescope Projection Reference</a></li>
</ul>


<hr>
<h2><a name="TOASTProjection">TOAST Projection</a></h2>
<p> TOAST (Tessellated Octahedral Adaptive Subdivision Transform) is an extension of as system of representing a sphere
as a hierarchical triangular mesh. The extension takes the mesh and flattens it into a square for use as 
a texture.</p>
<ul>
<li><a href="#ApproximatingaSphere">Approximating a Sphere</a></li>
<li><a href="#TOASTMapofEarth">TOAST Map of Earth</a></li>
<li><a href="InsideandOutsideProjections">Inside and Outside Projections</a></li>
<li><a href="#ImagePyramids">Image Pyramids</a></li>
</ul>

<h4>See Also</h4>
<ul type="disc">
<li><a href="#SourceProjections">Source Projections</a></li>
<li><a href="#WorldWideTelescopeProjectionReference">WorldWide Telescope Projection Reference</a></li>
</ul>



<hr>
<h3><a name="ApproximatingaSphere">Approximating a Sphere</a></h3>
<p>A Hierarchical Triangular Mesh (HTM) is a representation of a sphere proposed 
by astronomers in the Sloan Digital Sky Survey. It first models the sphere as an 
octahedron, then recursively subdivides each triangular face until the sphere is 
closely approximated by a highly tessellated polyhedron. WorldWide Telescope 
extends the concepts of HTM, where the subdivided octahedron is folded out flat 
into a square.</p>
<p>The recursive subdivision of tiles using an HTM system is shown in the following images. Basically, a sphere is modeled as a 
polygon (starting with an octahedron) that has lots of triangular faces. If the octahedron was folded flat, the North pole
would be at the center, the south pole at each of the four corners, and the equator would form a diamond within the square.</p>
<p>The following images shows the first three levels of HTM subdivision. As each 
side is subdivided the new point would be on the surface of a perfect sphere. 
Even after just three iterations the polyhedron is getting close to 
approximating a sphere.</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr>
	<td>&nbsp;&nbsp;&nbsp;
		<img alt="" height="200" src="//wwtweb.blob.core.windows.net/docs/images/Toast4.jpg" width="200"/>
		&nbsp;&nbsp;&nbsp;
		<img alt="" height="324" src="//wwtweb.blob.core.windows.net/docs/images/Toast4Flat.jpg" width="323"/>
		<br />&nbsp;&nbsp;&nbsp;
		<img alt="" height="200" src="//wwtweb.blob.core.windows.net/docs/images/Toast16.jpg" width="200">&nbsp;&nbsp;&nbsp;
		<img alt="" height="324" src="//wwtweb.blob.core.windows.net/docs/images/Toast16Flat.jpg" width="327">
		<br />&nbsp;&nbsp;&nbsp;
		<img alt="" height="200" src="//wwtweb.blob.core.windows.net/docs/images/Toast64.jpg" width="200">&nbsp;&nbsp;&nbsp;
		<img alt="" height="324" src="//wwtweb.blob.core.windows.net/docs/images/Toast64Flat.jpg" width="327"><br />
		Image credits: Jonathan Fay,<br>Tom McGlynn (NASA SkyView)
	</td>
</tr>
</table>
<h4>See Also</h4>
<ul type="disc">
<li><a href="#TOASTProjection">TOAST Projection</a></li>
</ul>

<hr>
<h3><a name="TOASTMapofEarth">TOAST Map of Earth</a></h3>
<p>When the equirectangular earth map is converted to TOAST, it looks like the following:</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td>
	<img alt="Toast Map" height="1024" src="//wwtweb.blob.core.windows.net/docs/images/ToastMapOfEarth.jpg" width="1024"></td></tr>
</table>
<p>The unusual warping in this image can be interpreted. The North Pole is in the center, and Antarctica split into four at 
the corners. In fact, all four corners meet at exactly the same point – the South Pole. The Equator follows a square whose 
corners are the middle of each side (shown by a red line in the image). The wrap-around in TOAST is shown in 
the following image. Each point on the side 
of the TOAST square, for example, A, B, C and D, will be adjacent to the points A`, B`, C` and D` when the projection is
mapped onto a sphere.</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td>
	<img alt="Toast Map" src="//wwtweb.blob.core.windows.net/docs/images/ToastLinks.jpg"></td></tr>
</table>
<p>The following images show the process a little simpler. The 1000 x 500 
pixel equirectangular image on the left produces the TOAST projection on the 
right, and if the collection file produced by the Sphere Toaster tool (with the 
output set to <strong>Planet</strong>) is loaded into WorldWide Telescope, the 
planet in the lower image will appear:</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td><img alt="" height="250" src="//wwtweb.blob.core.windows.net/docs/images/Toast_Input.bmp" width="500"></td><td>
	<img alt="" height="264" src="//wwtweb.blob.core.windows.net/docs/images/Toast_Output.bmp" width="263"></td></tr>
	<tr><td>
		<img alt="" height="396" src="//wwtweb.blob.core.windows.net/docs/images/ToastedRedPlanet.jpg" width="445"></td></tr>
</table>

<h4>See Also</h4>
<ul type="disc">
<li><a href="#TOASTProjection">TOAST Projection</a></li>
</ul>

<hr>
<h3><a name="InsideandOutsideProjections">Inside and Outside Projections</a></h3>

<p>Right ascension and longitude values in TOAST depend on whether the projection is being used to represent the inside or 
outside of a sphere. Notice that the degrees of RA/longitude are on the opposite sides in the following two diagrams.</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td><img alt="" height="542" src="//wwtweb.blob.core.windows.net/docs/images/Toast4FlatInside.jpg" width="531"></td><td>The inside of a sphere</td></tr>
<tr><td><img alt="" height="542" src="//wwtweb.blob.core.windows.net/docs/images/Toast4FlatOutside.jpg" width="531"></td><td>The outside of a sphere</td></tr>
</table>
<p>The resolution of a TOAST image is not even across the square, for example 
the following three lines all represent one circumference of the sphere, yet all 
three lines are of different lengths (2L * sqrt(2), 2L, and L * sqrt(2) 
respectively, where L is the length of one side of the square). This difference 
in resolution across a single image is still far less than that of 
equirectangular projection.</p>
<table class="T1" cellspacing="4" cellpadding="4">
<tr><td><img alt="" height="200" src="//wwtweb.blob.core.windows.net/docs/images/ToastPaths.jpg" width="600"></td></tr>
</table>
<h4>See Also</h4>
<ul type="disc">
<li><a href="#TOASTProjection">TOAST Projection</a></li>
</ul>

<hr>
<h3><a name="ImagePyramids">Image Pyramids</a></h3>
<p>The TOAST representation of a sphere can be a rather large square, so it is 
stored as an image pyramid. In this image pyramid, each lower level contains a 
higher-resolution version of the total image. One level down has twice the width 
and twice the height (so four times a greater area) of the image in the previous 
level. At each level, the image is tiled into 256 x 256 images. The purpose of 
having image pyramids is that as the viewer gets closer and closer to an object 
(a galaxy, for example) the rendering of that object becomes progressively more 
detailed. Alternatively as the viewer moves away from an object, less and less 
computing power is needed to render the image as lower levels of the image pyramid are used. 
The first level is a single 256 by 256 tile, which is obviously used when the 
view is at its maximum (perhaps looking at the stars from the Earth). At level 
7, the default deepest level, there are 128 x 128 (16384) tiles.&nbsp; </p>
<table class="T1" cellspacing="4" cellpadding="4">
	<tr>
		<td><h5>Level</h5></td>
		<td><h5>Number of Tiles</h5></td>
		<td><h5>Height, or Width, of the Total Image in pixels</h5></td>
		<td><h5>Approximate TOAST Resolution (arcmin/pixel)</h5></td>
	</tr>
	<tr>
		<td><strong>0</strong></td>
		<td>1</td>
		<td>256</td>
		<td>42.19</td>
	</tr>
	<tr>
		<td><strong>1</strong></td>
		<td>4</td>
		<td>512</td>
		<td>21.09</td>
	</tr>
	<tr>
		<td><strong>2</strong></td>
		<td>16</td>
		<td>1,024</td>
		<td>10.55</td>
	</tr>
	<tr>
		<td><strong>3</strong></td>
		<td>64</td>
		<td>2,048</td>
		<td>5.27</td>
	</tr>
	<tr>
		<td><strong>4</strong></td>
		<td>256</td>
		<td>4,096</td>
		<td>2.64</td>
	</tr>
	<tr>
		<td><strong>5</strong></td>
		<td>1,024</td>
		<td>8,192</td>
		<td>1.32</td>
	</tr>
	<tr>
		<td><strong>6</strong></td>
		<td>4,096</td>
		<td>16,384</td>
		<td>0.66</td>
	</tr>
	<tr>
		<td><strong>7</strong></td>
		<td>16,384</td>
		<td>32,768</td>
		<td>0.33</td>
	</tr>
	<tr>
		<td><strong>8</strong></td>
		<td>65,536</td>
		<td>65,536</td>
		<td>0.165</td>
	</tr>
	<tr>
		<td><strong>9</strong></td>
		<td>262,144</td>
		<td>131,072</td>
		<td>0.0825</td>
	</tr>
	<tr>
		<td><strong>10</strong></td>
		<td>1,048,576</td>
		<td>262,144</td>
		<td>0.04125</td>
	</tr>
	<tr>
		<td><strong>11</strong></td>
		<td>4,194,304</td>
		<td>524,288</td>
		<td>0.020625</td>
	</tr>
</table>
<p>&nbsp;</p>

<h4>See Also</h4>
<ul>
<li><a href="#TOASTProjection">TOAST Projection</a></li>
<li><a href="#WorldWideTelescopeProjectionReference">WorldWide Telescope Projection Reference</a></li>
</ul>
</body>
</html>
